<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises ES6 learning</title>
</head>
<body>
    <script>   
        function add_positivenos_async(n1, n2) {
           let p = new Promise(function (resolve, reject) {
              if (n1 >= 0 && n2 >= 0) {
                 resolve(n1 + n2)
              }
              else
                 reject('NOT_Postive_Number_Passed') 
              })
              return p;
        }
     
        add_positivenos_async(10, 20)
           .then(successHandler) 
           .catch(errorHandler);
     
        add_positivenos_async(-10, -20)
           .then(successHandler) 
           .catch(errorHandler);
     
        function errorHandler(err) {
           console.log('Handling error', err)
        }
        function successHandler(result) {
           console.log('Handling success', result)
        }

        // Promises.all()
     
        function add_positivenos_async(n3, n4) {
      let p = new Promise(function (resolve, reject) {
         if (n3 >= 0 && n4 >= 0) {
            
            resolve(n3 + n4)
         }
         else
            reject('NOT_Postive_Number_Passed')
      })

      return p;
   }
   
    Promise.all([add_positivenos_async(10,20),add_positivenos_async(30,40),add_positivenos_async(50,60)])
        .then(function(resolveValue){
         console.log(resolveValue[0])
         console.log(resolveValue[1])
        console.log(resolveValue[2])
         console.log('all add operations done')
   })
   .catch(function(err){
      console.log('Error',err)
   })
   console.log('end')

//    Promises Understanding Async callback


function notifyAll(fnSms, fnEmail) {   
      setTimeout(function() {   
         console.log('starting notification process');   
         fnSms();   
         fnEmail();   
      }, 2000);   
   }   
   notifyAll(function() {   
      console.log("Sms send ..");   
   },  
   function() {   
      console.log("email send ..");   
   });   
   console.log("End of script");

   setTimeout(function() {   
      console.log("one");   
      setTimeout(function() {   
         console.log("two");   
         setTimeout(function() {   
            console.log("three");   
         }, 5000);   
      }, 5000);   
   }, 5000);   
        
     </script> 
</body>
</html>